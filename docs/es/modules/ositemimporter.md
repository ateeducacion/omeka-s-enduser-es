# Importador de elementos Omeka S El [módulo Importador de elementos Omeka S](https://omeka.org/s/modules/Osii){target=_blank} permite importar elementos de una instalación de Omeka S a otra instalación de Omeka S. Este importador puede duplicar elementos, sus medios y sus conjuntos de elementos, pero no puede duplicar la información del sitio o de la página. 

La transferencia de datos de una instalación a otra crea una situación en la que existe un riesgo significativo de pérdida de datos, pero una planificación y preparación cuidadosas por parte del usuario de la instalación receptora pueden evitar que eso suceda.

## Preparación para la importación Para minimizar la pérdida de datos, la instalación local debe prepararse cuidadosamente para aceptar los datos de la instalación proveedora. En la medida de lo posible, el administrador de la instalación receptora debe trabajar para recrear el modelo de datos de la instalación remota. Para ello, el administrador debe: - Importar cualquier dato vinculado [vocabularios](../content/vocabularies.md) que utilicen los elementos de la instalación remota.
- [Instalar y configurar módulos](../modules/index.md) que controlen los tipos de datos utilizados como valores en los elementos de la instalación remota, tales como: - [Vocabulario personalizado](customvocab.md): además de instalar este módulo, el administrador tendrá que crear listas de valores de vocabulario personalizadas que coincidan con las utilizadas en la instalación remota.
     - [Tipos de datos numéricos](numericdatatypes.md) - [Sugerencia de valores](valuesuggest.md) - [Importar cualquier plantilla de recursos](../content/resource-template.md#import-a-resource-template) utilizada por la instalación remota.
- Instalar y activar los ingestores de medios utilizados originalmente por la instalación remota, como [Carga lateral de archivos](filesideload.md). - [Comprobar que los módulos que consumen muchos recursos, como Extraer texto, estén configurados para una importación masiva](extracttext.md) (es decir, desactivar Tesseract para el reconocimiento de imágenes y otros extractores hasta que se complete la ingesta, y luego utilizarlos en lotes más pequeños). 

Una vez que toda esa infraestructura esté en su lugar, la instalación local estará lista para comenzar a importar elementos. ## Añadir una importación Inicie el proceso de importación haciendo clic en el botón «Añadir una importación» en la página de inicio del módulo en la interfaz administrativa. A continuación, se le presentarán dos tipos de ajustes de configuración: remotos y locales.

### Configuración remota **Punto final raíz (obligatorio)**: introduzca el punto final de la API de la instalación desde la que desea importar. Para encontrar el «punto final raíz», deberá navegar hasta la instalación y sustituir la parte de la URL que incluye y viene después de «/s/» por «/api».

Por ejemplo, cambie esta URL: `http://your-domain-name.edu/omeka-s/s/sitename/page/home` por `http://your-domain-name.edu/omeka-s/api/` Si hace clic en una URL de API, es posible que vea algo como esto: ```
{"errors":{"error":"El recurso de la solicitud de API debe ser una cadena. Se ha introducido \u0022NULL\u0022."}} ``` Aunque se trata de un error, esta URL es el punto final raíz. **Consulta**: Tiene la opción de incluir una «consulta» para filtrar los elementos que se van a importar. Si no proporciona una consulta, el módulo importará todos los elementos **públicos** de la instalación remota, incluidos los que no forman parte de un sitio público. Una forma de generar una consulta es realizando una búsqueda avanzada en el sitio remoto. Una vez cargados los resultados, puede seleccionar la parte de la URL a la derecha del «?» para obtener la cadena de consulta. 

**Identidad clave** y **Credencial clave**: Si desea importar recursos marcados como **privados**, deberá proporcionar una «Identidad clave» y una «Credencial clave» generadas por la instalación base. La única forma de obtener estas cadenas es tener una cuenta en la instalación remota o pedirlas a alguien que tenga una cuenta.

### Configuración local **Etiqueta de importación (obligatorio)**: introduzca una etiqueta identificativa para la importación. Puede ser el nombre de la organización remota u otra forma que le ayude a recordar esta conexión. **Conjunto de elementos**: si lo desea, seleccione uno o varios conjuntos de elementos a los que se asignarán los elementos importados.

**Excluir medios**: marque esta opción si desea que la importación excluya los medios. Si no se marca, los medios se importarán normalmente. Si decide cambiar esta configuración más adelante, deberá tomar una nueva instantánea y procesar una nueva importación para que esos cambios se apliquen. No hay capacidad para la sincronización automática continua de datos.

**Excluir conjuntos de elementos**: marque esta opción si desea que la importación excluya conjuntos de elementos (dentro de los parámetros de su consulta, si se ha establecido una consulta). Si no se marca, los conjuntos de elementos de la instalación remota se importarán de forma normal. **Conservar recursos eliminados**: marque esta opción si, durante la importación, desea conservar los recursos locales de una importación anterior que se eliminaron de la instantánea remota actual. Si se marca, los recursos eliminados permanecerán localmente, pero ya no serán gestionados por esta importación. Si no se marca, los recursos eliminados se eliminarán localmente como de costumbre. **Añadir URL del sitio remoto**: Si desea indicar la fuente general del elemento importado, introduzca la URL del sitio del que proceden los recursos importados. Si se introduce, se añadirá a cada recurso importado, guardado como un valor utilizando la propiedad `osii:source_site`. Es posible que desee utilizar una URL de sitio Omeka específica, como `http://your-domain-name.edu/omeka-s/s/sitename/`, en lugar de la URL de instalación base aquí; pero tenga en cuenta que todos los elementos se importarán con este enlace, independientemente de si forman parte de algún sitio o no. **Añadir URL de recurso remoto**: Marque esta casilla si desea añadir la URL canónica del elemento remoto a cada elemento importado, guardada como un valor utilizando la propiedad «osii:source_resource». Esto proporcionará un enlace directo al elemento original a través de la API, en el formato «http://your-domain-name.edu/omeka-s/api/items/1234», en lugar de un enlace a una página de visualización de elementos en un sitio concreto. 

Guarde sus opciones de configuración haciendo clic en el botón «Enviar» situado en la esquina superior derecha de la interfaz. Una vez configurada la importación, se guarda para su futura edición y actualización. ![Añadir formulario de configuración de importación con los datos rellenados para el punto final raíz, la consulta, la etiqueta de importación, el conjunto de elementos y la URL del sitio remoto](../modules/modulesfiles/osii_ConfigureImportFormWithData.png)

## Gestionar importaciones Una vez configurada una importación, el usuario accede a una interfaz con tres áreas: - **Área de asignación**: proporciona opciones para asignar los datos de la instalación remota a la instalación local. - **Acciones de importación**: proporciona las opciones de acción para el proceso de importación y ofrece acceso a los resultados de esas acciones. - **Metadatos de importación**: muestra las opciones de configuración para la importación.

Tras la configuración inicial de una importación, el usuario encontrará un mensaje en el área principal de la interfaz que dice «Preparar importación no está disponible ahora». ![Pantalla de resultado de importación añadida correctamente con las secciones Acciones de importación y Metadatos de importación en la barra lateral derecha](../modules/modulesfiles/osii_ImportSuccessfullyAdded.png)

### Realizar la instantánea. Continúe con la sección Acciones de importación de la barra lateral. La sección «Acciones de importación» contiene la mayoría de las acciones que necesitará para ejecutar y solucionar problemas de una importación con éxito. Haga clic en el enlace **Realizar instantánea** y, a continuación, en el botón de confirmación para realizar una instantánea de los recursos actuales en la instalación remota. Esto recopilará los datos necesarios para importar los recursos y conciliar la instalación local con la remota. 

![Sección Acciones de importación de la barra lateral derecha con el enlace Tomar instantánea resaltado con un rectángulo rojo](../modules/modulesfiles/osii_TakeS.png)

El indicador de estado de la instantánea cambiará de «[n/a]» a «En curso». La importación puede tardar algún tiempo, dependiendo del alcance del universo que se vaya a examinar. Puede hacer clic en el enlace «Actualizar estado» para comprobar el progreso. Si el estado cambia a «Error», puede hacer clic en «Ver trabajo» para inspeccionar el procesamiento de la instantánea.

![Sección de acciones de importación con el estado de la instantánea como «En curso»](../modules/modulesfiles/osii_SnapshotInProgress.png) Si lo desea, tiene la opción de «Detener instantánea». El estado de la instantánea cambiará a «Deteniéndose». Haga clic en «Actualizar estado» hasta que el estado haya cambiado a «Detenido».

Una vez que haya tomado correctamente una instantánea, el estado cambiará a «Completado» y el panel principal de la interfaz contendrá bastante metadatos sobre la instantánea. Utilícelos para conciliar las diferencias entre las instalaciones remotas y locales, en la medida que desee. ### Preparar la importación Situada en el panel principal de la interfaz, el área de asignación proporciona a los usuarios una interfaz para especificar los elementos de los datos que se van a importar. La interfaz con pestañas ofrece una comparación entre la información sobre la instalación remota y la configuración de datos local. Aproveche este tiempo entre la instantánea y la importación completa para perfeccionar su instalación local y capturar tanta información como sea posible de la importación. - **Pestaña Recursos**: esta vista ofrece una descripción general de los recursos dentro del universo de importación, tanto en la instalación remota como en la local.

![Tabla de resumen de gestión de importaciones con pestañas para Recursos, Tipos de datos, Plantillas, Ingestores de medios, Propiedades y Clases](../modules/modulesfiles/osii_ManageImportOverview.png) - **Pestaña Tipos de datos**: esta vista ofrece una vista de los tipos de datos remotos y su recuento de valores. El usuario puede seleccionar en un menú desplegable los tipos de datos disponibles localmente (por ejemplo, literal, recurso, URI, `numérico:marca de tiempo`) para asignar la instalación local a la instalación remota. Si encuentra que hay tipos de datos disponibles de forma remota que no están disponibles localmente, deberá añadirlos a su instalación antes de continuar para evitar la pérdida de datos. Si un tipo de datos remoto no se asigna a uno local, los valores no se importarán. Los tipos de datos se pueden añadir mediante módulos como [Tipos de datos numéricos](numericdatatypes.md) y [Sugerencia de valores](valuesuggest.md). - **Pestaña Plantillas**: esta vista muestra las plantillas de recursos remotos y su recuento. El usuario puede seleccionar en un menú desplegable los tipos de datos disponibles localmente para asignar la instalación local a la instalación remota. Tenga en cuenta que la instalación local puede duplicar las plantillas remotas realizando [exportaciones e importaciones](../content/resource-template.md#share-resource-templates). Este puede ser un buen momento para crear o modificar plantillas para reflejar mejor los elementos que desea importar. - **Pestaña Ingestores de medios**: esta vista muestra una lista de los ingestores de medios remotos y si están disponibles en la instalación local. Los medios solo se importarán si su ingestor está disponible. Tenga en cuenta que algunos de estos ingestores se pueden añadir instalando y activando módulos, como [File Sideload](filesideload.md). - **Pestaña Propiedades**: esta vista incluye una lista de las propiedades remotas y si están en la instalación local. Los valores solo se importarán si sus respectivas propiedades están en la instalación local. Si encuentra que hay propiedades disponibles de forma remota que no están disponibles localmente, deberá [añadir sus vocabularios a su instalación](../content/vocabularies.md#add-a-vocabulary) antes de continuar para evitar la pérdida de datos. Tenga en cuenta que es posible que vea algunas propiedades en rojo en la instalación remota, aquellas que no estaban disponibles en versiones anteriores o que han quedado obsoletas en versiones posteriores del vocabulario. Es posible que tenga que buscar e instalar la misma versión específica de ese vocabulario en su instalación local. ![Gestionar la tabla de importación con la tabla de inventario de propiedades con dos recuadros rectangulares rojos que muestran las propiedades que están presentes y las que no están presentes en la instalación local](../modules/modulesfiles/osii_PropertyInventory.png)

- **Pestaña Clases**: esta vista muestra una lista de las clases remotas y si están instaladas en la instalación local. Si no es así, los elementos se importarán sin clases. Si encuentra que hay clases disponibles de forma remota que no están disponibles localmente, deberá añadirlas a su instalación antes de continuar para evitar la pérdida de datos. Las clases se añaden a través de [vocabularios](../content/vocabularies.md). Tenga en cuenta que es posible que vea algunas clases en rojo en la instalación remota, aquellas que no estaban disponibles en versiones anteriores o que han quedado obsoletas en versiones posteriores del vocabulario. Es posible que tenga que buscar e instalar la misma versión específica de ese vocabulario en su instalación local. 

Después de asignar los elementos del modelo de datos, haga clic en el botón «Enviar» situado en la esquina superior derecha de la página. Recibirá un mensaje de confirmación indicando que la importación se ha preparado correctamente. ### Modifique la instantánea según sea necesario Una vez que haya visto los recursos remotos, puede modificar la instantánea si lo desea, volviendo a la primera página de configuración. 

Por ejemplo, si desea importar solo los elementos dentro de un conjunto de elementos concreto que aparecía en la instantánea, utilice el campo Consulta para limitar los elementos que se encuentran en ese conjunto de elementos. Puede construir estas consultas de restricción utilizando la búsqueda avanzada que se encuentra en los sitios remotos. Una vez hecho esto, tome una nueva instantánea. Debería ver un número diferente de recursos en el «Recuento de valores remotos». 

### Importar la instantánea En la información de la instantánea, en el panel Acciones de importación, encontrará la información de importación. Inicialmente, el estado de la importación debería indicar [n/a]. Haga clic en el enlace «Importar instantánea» para iniciar la importación. Al igual que con el proceso de instantánea, el estado de la importación cambiará a «En curso» y puede tardar algún tiempo en completarse. Haga clic en el enlace «Actualizar estado» para comprobar el progreso. Del mismo modo, puede detener una importación en curso haciendo clic en «Detener importación». Si el estado cambia a «Error», puede hacer clic en el enlace «Ver trabajo» para revisar el problema y cualquier mensaje de registro. ![Sección de acciones de importación de la barra lateral derecha con el enlace Importar instantánea resaltado con un rectángulo rojo](../modules/modulesfiles/osii_ImportSnapshot.png)

Una vez que el estado de la importación alcance «Completada», podrá hacer clic en «Ver elementos», «Ver medios» o «Ver conjuntos de elementos» desde la importación. Además, la importación completada recibirá una marca de tiempo que indica el momento de la importación.

## Volver a visitar una importación Una vez que haya iniciado correctamente una importación, la pantalla principal del módulo mostrará esa acción en una tabla de importaciones intentadas. Esa tabla incluye la etiqueta de la importación, el punto final raíz, el estado de la instantánea, el estado de la importación y el propietario de la importación.

### Editar una importación Aunque una importación pueda haber sido técnicamente satisfactoria, es posible que haya sufrido alguna pérdida de datos debido a la asignación entre la instalación remota y la instalación local. Puede editar la importación para remediar esa pérdida de datos. Comience el proceso de edición haciendo clic en el icono del lápiz situado a la derecha de la etiqueta de importación que desee. A continuación, tendrá la oportunidad de actualizar sus configuraciones, volver a tomar la instantánea, actualizar sus asignaciones y volver a ejecutar la importación.

### Repetir una importación Es posible que tenga una importación que deba volver a ejecutarse para capturar nuevos recursos de la instalación remota. En este caso, puede editar la importación para volver a tomar la instantánea y ejecutar una nueva importación. La importación no es una sincronización bidireccional, por lo que los cambios realizados en los elementos locales no se transfieren a los elementos remotos. Tenga en cuenta también que el módulo no conserva los cambios locales después de las importaciones posteriores. Los elementos importados siempre reflejarán su estado en la instalación remota en el momento de la instantánea. **No ejecute una importación posterior si necesita conservar los cambios locales.** Puede iniciar el nuevo proceso de importación haciendo clic en el icono del lápiz situado a la derecha de la etiqueta de la importación que desee. A continuación, tendrá la oportunidad de actualizar sus configuraciones. En esta situación, deberá considerar cuidadosamente la opción «Conservar recursos eliminados» si se han eliminado recursos de la instalación remota. Después de enviar sus configuraciones, puede seguir el proceso de tomar una nueva instantánea de la instalación remota, actualizar o confirmar sus asignaciones y volver a ejecutar su importación. Esta nueva importación de la instantánea importará nuevos recursos y actualizará los recursos existentes con los cambios de la instalación remota. 
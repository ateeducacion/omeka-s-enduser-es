# OHMS Embed El [módulo OHMS Embed](https://omeka.org/s/modules/OhmsEmbed/){target=_blank} permite a los administradores del sitio añadir objetos [Oral History Metadata Synchonizer](https://www.oralhistoryonline.org/){target=_blank} como medios a los elementos de Omeka S.

Este módulo añadirá un visor OHMS a los lugares donde se pueden incrustar medios, lo que permitirá a los usuarios ver índices, transcripciones y/o traducciones de vídeos y audios mientras se reproducen. ![Una visualización pública de un visor OHMS en una página de Omeka, con un pequeño vídeo arriba, una transcripción a la izquierda y un índice a la derecha.](modulesfiles/ohmsembed_public.png)

Los archivos XML de OHMS se pueden cargar en elementos de Omeka como medios. Sin este módulo, aparecerán como archivos adjuntos disponibles para su descarga. Con este módulo instalado y activado, se mostrarán como pantallas de vídeo/audio con transcripciones, índices, etc. El reproductor multimedia OHMS puede aparecer en páginas de elementos y medios, y se puede colocar en páginas del sitio Omeka con el bloque de página «Media embed» (Incrustar medios).

Preparar la instalación de Omeka para recibir archivos OHMS puede requerir cierto trabajo e incluye algunos pasos opcionales para mejorar el proceso. Lea detenidamente los siguientes pasos antes de realizar cualquier acción, para que pueda configurar la instalación correctamente en función de sus necesidades específicas. ## Crear archivos OHMS

Para crear paquetes OHMS con sus entrevistas, debe utilizar la aplicación OHMS disponible en el [sitio web de OHMS](https://www.oralhistoryonline.org/){target=_blank}, lo que requiere solicitar una cuenta gratuita y trabajar con la aplicación basada en la web. La aplicación OHMS generará archivos XML que contienen toda la información creada dentro de esa herramienta. 

Los archivos OHMS incluyen un enlace al medio de vídeo o audio que se presentará junto con el índice y los textos. **No** incluyen el archivo multimedia en sí. Este debe alojarse en otro lugar. Entre las opciones de alojamiento se incluyen Youtube, Vimeo, Soundcloud y otros proveedores de alojamiento de audio/vídeo. ### Aloje sus medios en Omeka (opcional)

Puede alojar sus archivos dentro de su instalación de Omeka, como medios añadidos a los elementos, y luego proporcionar las URL de esos archivos a los paquetes OHMS que genere. Esto significa que debe: - crear elementos Omeka ingestando sus medios mediante una carga manual o un proceso de ingesta masiva - recopilar las URL de sus medios del servidor Omeka - proporcionar esas URL a la aplicación OHMS
- generar los archivos XML en Omeka - y, a continuación, añadir esos archivos XML a los elementos respectivos que ya ha creado. Las ventajas de este enfoque incluyen la simplicidad del autoalojamiento y el control sobre su propiedad intelectual, además de las características de las propiedades de datos enlazados, los tipos de datos y los vocabularios controlados que puede utilizar para añadir metadatos específicos de los medios directamente en Omeka.

Una vez que haya subido su audio o vídeo a un elemento, deberá localizar la URL directa del archivo. Vaya a su elemento y haga clic en el medio que desee utilizar. En la descripción de la parte derecha de la pantalla, localice la sección Derivados del archivo. El enlace «Original» será el que deberá proporcionar a la aplicación OHMS. Puede hacer clic con el botón derecho del ratón para copiar esta URL.

![Panel derecho de la descripción del medio centrado en la sección «Derivados del archivo», que muestra el enlace al archivo original.](modulesfiles/ohmsembed_original.png) En la aplicación OHMS, utilice «Host» como opción «Host del archivo multimedia». Introduzca la URL del archivo original en la instalación de Omeka S como «URL del medio». 

![Imagen de la pantalla del editor de metadatos de OHMS centrada en la sección «Media and Technical» (Medios y aspectos técnicos), que muestra el anfitrión seleccionado entre las opciones y la URL de un archivo original en la propiedad «Media URL» (URL del medio).](modulesfiles/ohmsembed_ohms_mediahost.png) Cuando el paquete de historia oral esté completo, exporte su archivo XML de OHMS como de costumbre.

![Vista de registro de OHMS con la opción Exportar XML disponible.](../modules/modulesfiles/ohmsembed_ohms_xmlexport.png)

Cuando vuelva al elemento Omeka S correspondiente y cargue el archivo XML como medio, asegúrese de que el archivo XML sea el medio principal del elemento. ## Añadir archivos OHMS a Omeka El editor OHMS produce un archivo XML que contiene los metadatos, el índice y la transcripción que acompañan a la historia oral. El archivo debe añadirse a un elemento Omeka S como medio para que aparezca el visor OHMS. 

Por lo general, XML no se encuentra entre los tipos de medios y extensiones de archivo permitidos en una instalación de Omeka S. Primero deberá habilitarlo. ### Habilitar cargas XML Vaya a la página Configuración de su instalación y navegue hasta la sección Seguridad. - Añada `text/xml` a la lista **Tipos de medios permitidos**.
- Añada «xml» a la lista **Extensiones de archivo permitidas**. ![Vista de la configuración de seguridad para los tipos de medios permitidos y las extensiones de archivo permitidas con XML añadido a las listas.](../modules/modulesfiles/ohmsembed_xmlsettings.png)

Cuando haya terminado, haga clic en el botón «Guardar» situado en la esquina superior derecha de la pantalla. ### Configurar la extracción de metadatos (opcional) Con el módulo [Extraer metadatos](extractmetadata.md), puede rellenar los campos de metadatos de sus elementos Omeka con información de los archivos XML: título, fecha, duración, fuente, etc. 

En primer lugar, actualice el módulo Extract Metadata a la versión 1.2.0 o posterior. Esto añadirá un extractor específico de OHMS a las herramientas disponibles (la herramienta de extracción OHMS forma parte de este módulo y no aparecerá si OHMS Embed no está instalado y activado). 

Vaya a la página Módulos, asegúrese de que está actualizado y activado y, a continuación, haga clic en el botón «Configurar». Verá una lista de herramientas extractoras disponibles, entre las que debería aparecer «OHMS». Marque la casilla para asegurarse de que está habilitado y, a continuación, guarde la página. ![Página de configuración del módulo Extract Metadata con «OHMS» disponible y habilitado.](modulesfiles/ohmsembed_extractmetadata.png)

A continuación, para asignar la información de los metadatos XML a sus elementos Omeka, habilite «JSON Pointer» en la pestaña «Mappers». A continuación, vaya a la pestaña «JSON Pointer crosswalk» para configurar los campos de metadatos, ya sea para los medios o para el elemento. Los metadatos extraídos se generarán como texto sin formato. Le recomendamos que vea un ejemplo de paquete OHMS y compruebe qué campos se están utilizando. 

También le sugerimos que utilice una plantilla de recursos para sus archivos OHMS, a fin de ayudarle a planificar los campos de metadatos seleccionados. ![Página de configuración del módulo «Extraer metadatos» que muestra la pestaña «JSON Pointer crosswalk». Se enumeran varios punteros OHMS: OHMS «/id» asignado a «Identificador» de Dublin Core desde los medios, por ejemplo.](modulesfiles/ohmsembed_EMcrosswalk.png)

A continuación se muestra una lista de posibles punteros generados por la aplicación OHMS (asegúrese de incluir la barra inclinada en la interfaz de Omeka): | Metadatos | Puntero | |-----------------------------|-----------------------------| | Fecha de la entrevista | `/date` | | Fecha (formato no preferido) | `/date_nonpreferred_format` | | Título | `/title` | | Resumen | `/description` |
| Asunto | `/subject` | | Palabras clave | `/keyword` | | Entrevistado | `/interviewee` | | Entrevistador | `/interviewer` | | Idioma | `/language` | | Idioma para traducción | `/transcript_alt_lang` | | Tipo | `/type` | | Formato | `/format` |
| Declaración de derechos | `/rights` | | Declaración de uso | `/usage` | | Número de acceso | `/accession` | | Duración | `/duration` | | ID de la colección | `/collection_id` | | Nombre de la colección | `/collection_name` | | Enlace a la colección | `/collection_link` |
| ID de la serie | `/series_id` | | Serie (nombre) | `/series_name` | | Enlace de la serie | `/series_link` | | Organización | `/repository` | | URL de la organización | `/repository_url` | | Agradecimiento | `/funding` | | Notas del usuario | `/user_notes` |
| Archivo multimedia | `/nombre_archivo` | | ID multimedia | `/media_id` | | URL multimedia | `/media_url` | | Formato multimedia | `/fmt` | | Ubicación XML OHMS | `/xmllocation` | | Nombre de archivo XML OHMS | `/xmlfilename` | | Versión OHMS | `/version` |
| ID de registro CMS | `/cms_record_id` | | ID de registro | `/id` | | Fecha de registro | `/dt` | | Rel | `/rel` | ### ¡¡¡Subir archivos XML!!! Nota: si utiliza el módulo [Extract Text](extracttext.md), es posible que desee desactivarlo antes de subir un archivo XML. El contenido de estos archivos no es legible para los humanos. Si desea que el contenido de sus textos OHMS (transcripciones, traducciones, índices, etc.) sea buscable en su sitio Omeka, puede extraer el texto con este módulo, pero todo el código XML será visible como metadatos en sus elementos y medios. Puede ocultar este campo utilizando el módulo [Hide Properties](https://omeka.org/s/modules/HideProperties/){target=_blank}, lo que afectará a este campo en todos los recursos. Puede cargar sus archivos XML de OHMS individualmente en elementos desde su ordenador, o puede importar por lotes archivos OHMS a elementos nuevos o existentes utilizando [CSV Import](csvimport.md). 

!!! Nota: Omeka S no podrá generar una miniatura del elemento a partir de los archivos OHMS. Es posible que desee añadir una [miniatura personalizada](https://omeka.org/s/docs/user-manual/content/items/#thumbnail) en la pestaña Avanzado de la interfaz de edición de elementos.

#### Importación masiva de archivos OHMS Si está interesado en añadir muchos objetos OHMS a su instalación de Omeka S a la vez, puede utilizar la [Importación CSV](csvimport.md). También puede utilizar [Carga lateral de archivos](filesideload.md) para alojar los archivos XML para su ingesta si es necesario.

Cargue los archivos XML en su servicio de alojamiento o en el directorio de carga lateral de archivos. A continuación, cree una hoja de cálculo que enumere las URL de los archivos y los metadatos que desea importar. Si tiene previsto extraer todos los metadatos de los archivos XML, puede proporcionar exclusivamente una columna con las URL de los archivos.

Si ya ha creado elementos Omeka S para [alojar medios de audio/vídeo](#host-your-media-in-omeka-optional), busque un identificador de elemento Omeka único para adjuntar los archivos correspondientes (como el ID interno de Omeka) y añada esos ID a las filas de su hoja de cálculo. A continuación, utilice el módulo CSV Import para [importar medios](https://omeka.org/s/docs/user-manual/modules/csvimport/#import-media).

Si aún no tiene elementos Omeka de destino, puede utilizar la importación CSV para crear nuevos elementos con sus archivos XML. #### Extracción masiva de archivos OHMS Tenga en cuenta que no es necesario ejecutar «Extraer metadatos» y «Extraer texto» en el momento de la importación. Es posible que desee desactivar los módulos, importar primero sus archivos XML y, a continuación, extraer masivamente el texto y los metadatos. 

Seleccione varios elementos en la página de exploración de elementos de la interfaz de administración, elija «Editar seleccionados» en el menú desplegable «Acciones por lotes» y, a continuación, busque el campo «Extraer metadatos» en la lista de opciones. Seleccione «Actualizar y asignar metadatos». Vuelva a hacer lo mismo, busque «Extraer texto» en la lista y seleccione «Actualizar texto».

![Actualizar y asignar metadatos de forma masiva para las historias orales una vez que se hayan cargado.](modulesfiles/ohmsembed_EMbatch.png) ## Insertar el visor OHMS Una vez que haya añadido sus archivos XML OHMS a los elementos de Omeka S, estará listo para mostrarlos en sus sitios. 

### Visor OHMS en páginas de elementos y medios El visor OHMS se cargará en [páginas de recursos (elementos y medios)](../sites/site_theme.md#configure-resource-pages) si su tema está configurado para mostrar el bloque «Incrustaciones de medios» en las páginas de elementos y el bloque «Representación de medios» en las páginas de medios. 

![La configuración de la página de recursos con «Media embeds» en la parte superior de la página de elementos.](modulesfiles/ohmsembed_itemRes.png)

!!! nota El bloque de galería Lightbox no muestra actualmente el visor OHMS cuando se detecta un archivo XML OHMS. Para que OHMS se muestre, **debe** utilizarse el bloque «Media embeds» o «Media render». Es posible que su sitio necesite alguna reconfiguración para incorporar esto sin problemas, en lugar de incluir tanto el bloque Lightbox como el bloque Media y, por lo tanto, tener otros medios renderizados dos veces. 

### Visor OHMS en las páginas del sitio Puede utilizar el bloque de página «Incrustar medios» (https://omeka.org/s/docs/user-manual/sites/site_pages/#media-embed) para colocar el visor OHMS directamente en las páginas del sitio. ![Edición de página que muestra el bloque «Incrustar medios» con la configuración.](modulesfiles/ohmsembed_mediaEmbed.png)

Debe seleccionar el archivo XML como medio adjunto; no elija el vídeo o el audio que haya importado al mismo elemento. Asegúrese también de que «Embed media» (Incrustar medio) esté seleccionado en el menú desplegable «Media display» (Visualización de medios). ![Vista de página con el bloque Media Embed con el visor OHMS en la primera columna y un ejemplo de HTML en la segunda columna](modulesfiles/ohmsembed_public_mediaembed.png)

El visor OHMS se mostrará como una columna alta y estrecha si el diseño está configurado en «Vertical», y se mostrará el visor OHMS a ancho completo si el diseño está configurado en «Horizontal». ![Vista de elemento de Omeka S con visor OHMS](modulesfiles/ohmsembed_public_itemshow.png)

#### Uso del visor OHMS El visor OHMS de Omeka S tiene varios controles públicos: un botón para alternar entre el índice y la transcripción y/o traducción, si esos elementos están disponibles, un icono de información que muestra los metadatos de los medios y una opción para pasar a una vista de pantalla completa.

![Controles de la interfaz pública del visor OHMS de Omeka S que muestran un conmutador de índice/transcripción/traducciones, un icono «i» y un botón de pantalla completa](../modules/modulesfiles/ohmsembed_public_controllers.png) 
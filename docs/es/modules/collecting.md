# Recopilación El [módulo de recopilación](https://omeka.org/s/modules/Collecting/){target=_blank} le permite recopilar contribuciones públicas a través de sus sitios. Los usuarios pueden cargar archivos o enviar entradas de texto junto con algunos metadatos identificativos, que los administradores de su sitio pueden moderar y aprobar para su inclusión.

Una vez activado en la pestaña [módulos](index.md) del panel de administración, Recopilación se configura sitio por sitio. Añade una sección a la página Configuración del sitio y añade un enlace debajo de cada sitio para los formularios de Recopilación. Los formularios se añaden a las páginas del sitio mediante [bloques de página](../sites/site_pages.md#page-blocks).

Collecting se integra con los módulos [Custom Vocab](../modules/customvocab.md), [Mapping](../modules/mapping.md) y [Numeric Data Types](../modules/numericdatatypes.md).

## Añadir un formulario Si Collecting está activo, aparecerá una pestaña para Collecting en el menú contextual de cada sitio. ![La flecha roja apunta a la pestaña Collecting del sitio National Parks](modulesfiles/collecting_nav.png) Al hacer clic en ella, se le dirigirá a una lista de sus formularios de recopilación para ese sitio. Si acaba de instalar el módulo, la página Formularios de recopilación mostrará el mensaje «Este sitio no tiene formularios de recopilación». Para añadir un nuevo formulario, haga clic en el botón «Añadir nuevo formulario» situado en la esquina superior derecha de la ventana. ![Pestaña Recopilación, sin formularios, la flecha roja señala el botón Añadir nuevo](modulesfiles/collecting_addnew.png)

La página Añadir formulario de recopilación tiene dos secciones: la primera contiene un conjunto de campos y opciones que debe completar; la segunda es donde se añaden y editan las indicaciones que conformarán el formulario que verán y rellenarán los visitantes del sitio. ![Página Añadir formulario de recopilación](modulesfiles/collecting_addform.png) ### Campos y ajustes - **Etiqueta**: asigne un nombre al formulario de recopilación. La etiqueta aparecerá como un encabezado encima del formulario en la parte pública, por lo que debe ser descriptiva y útil tanto para usted como para los visitantes del sitio. - **Conjunto de elementos**: seleccione el conjunto de elementos al que desea añadir los elementos recopilados. - **Tipo de anonimato**: un menú desplegable con tres opciones: - «El usuario establece su propio anonimato»: los usuarios pueden decidir si contribuyen de forma anónima y si sus elementos pueden publicarse.
     - «Las entradas de usuario público y nombre de usuario son visibles públicamente»: tanto el nombre del usuario como sus elementos se harán públicos. - «Las entradas de usuario público y nombre de usuario son privadas»: ambas entradas siguen siendo públicas. - **Texto de éxito**: el mensaje que se muestra en una nueva página si el elemento se recopila correctamente.
- **Texto del correo electrónico**: si recopila una dirección de correo electrónico del usuario en el formulario, este recibirá un mensaje de confirmación sobre el envío de su elemento. ### Indicaciones Las indicaciones se enumeran en una tabla que muestra su **Tipo** y el **Texto** que se muestra en el formulario público. Estas indicaciones conforman el formulario que verán los visitantes del sitio (además de la etiqueta, mencionada anteriormente).

Para añadir una nueva indicación, haz clic en el botón «Añadir indicación» justo debajo del encabezado Indicaciones. Se abrirá un panel lateral con un menú desplegable para seleccionar un tipo de indicación. Una vez seleccionado, las opciones para ese tipo se cargarán en la barra lateral para que las edites, con un botón «Guardar cambios» en la parte inferior de las opciones. ![Menú desplegable Añadir indicación](modulesfiles/collecting_prompts.png)

El módulo Recopilación tiene tipos de indicaciones con las siguientes opciones: **Propiedad del elemento**: seleccione una propiedad de los vocabularios de la instalación para que el visitante la utilice para describir el elemento. - Propiedad: seleccione una propiedad de los vocabularios (ejemplo: Descripción). - Texto de la indicación: si desea que la indicación sea algo distinto de la etiqueta de la propiedad.
- Tipo de entrada: longitud y tipo de cuadro de entrada. Elija entre: - Cuadro de texto (una línea). - Cuadro de texto (varias líneas). - Seleccionar menú (desplegable): introduzca las opciones para el menú en el campo «Seleccionar opciones de menú» que aparecerá, con una opción por línea. - Recurso del elemento (desplegable): ofrecerá al usuario la posibilidad de elegir entre los elementos existentes para añadirlos como valor de propiedad. Puede pegar cualquier cosa después de «admin/» en la URL de una búsqueda avanzada para cargar elementos específicos. - Si tiene instalado [Vocabulario personalizado](../modules/customvocab.md), un menú desplegable adicional le permitirá seleccionar entre sus vocabularios personalizados existentes. Esto se cargará como un menú desplegable para los usuarios en la parte pública del formulario.
	- Si tiene instalado [Tipos de datos numéricos](../modules/numericdatatypes.md), también tendrá las siguientes opciones: - Marca de tiempo numérica - Intervalo numérico - Duración numérica - Número (entero o decimal). - Marque la casilla «¿Obligatorio?» si el mensaje es obligatorio.

**Elementos multimedia** permite a los visitantes añadir elementos multimedia a su envío. Tipo de elemento multimedia: - Un menú desplegable para el tipo de elemento multimedia, con las siguientes opciones: - Cargar uno, que permite a los usuarios cargar un archivo - Cargar varios, que permite a los usuarios cargar varios archivos a la vez utilizando el selector de archivos nativo del navegador (con las teclas Mayús o Control)
	- Si tiene instalado [Mapping](../modules/mapping.md), puede añadir un mapa que permita a los usuarios proporcionar ubicaciones haciendo clic directamente en el mapa y proporcionando una etiqueta en el campo situado justo debajo. Si el campo situado debajo del mapa se deja en blanco, el marcador se etiquetará con el contenido del campo Título. ![La página pública de Recopilación incluye un mapa para seleccionar una ubicación. Un campo justo debajo del mapa permite a los usuarios introducir la etiqueta del marcador.](modulesfiles/collecting_map.png) - URL - HTML. - Texto de solicitud: si desea que la solicitud sea algo distinto a la etiqueta de la propiedad. - Marque la casilla «¿Obligatorio?» si la solicitud es obligatoria. **Elemento complementario** añade información adicional para el elemento, sin vincular a ningún vocabulario o propiedad en particular.

- Texto de solicitud: si desea que la solicitud sea algo distinto a la etiqueta de la propiedad. - Tipo de entrada: longitud y tipo de cuadro de entrada. Elija entre: - Cuadro de texto (una línea) - Cuadro de texto (varias líneas) - Menú de selección (desplegable): introduzca las opciones para el menú en el campo «Seleccionar opciones de menú» que aparecerá, con una opción por línea.
 - Marque la casilla «¿Obligatorio?» si la solicitud es obligatoria. **Nombre de usuario** para convertirse en el propietario del elemento. Si la persona que utiliza el formulario es un usuario registrado en la instalación de Omeka S, este campo se rellenará automáticamente.

- Texto de solicitud: si desea que la solicitud sea diferente a la etiqueta de la propiedad. - Marque la casilla «¿Obligatorio?» si la solicitud es obligatoria. **Correo electrónico del usuario** donde la persona que añade el elemento puede proporcionar su correo electrónico. Si se deja en blanco, no recibirán un correo electrónico con el texto del campo «Texto del correo electrónico». - Texto de solicitud: si desea que la solicitud sea diferente a la etiqueta de la propiedad.
- Marque la casilla «¿Obligatorio?» si el mensaje es obligatorio. **Privado del usuario** recopile información adicional del usuario que se mantendrá privada. - Texto del mensaje: si desea que el mensaje sea diferente al de la etiqueta de la propiedad. - Tipo de entrada: longitud y tipo de cuadro de entrada. Elija entre: - Cuadro de texto (una línea) - Cuadro de texto (varias líneas)
     - Menú desplegable: introduzca las opciones del menú en el campo «Seleccionar opciones de menú» que aparecerá, con una opción por línea. - Marque la casilla «¿Obligatorio?» si la solicitud es obligatoria. **Usuario público**: recopile información adicional del usuario que se puede hacer pública. - Texto de solicitud: si desea que la solicitud sea diferente a la etiqueta de la propiedad.
- Tipo de entrada: longitud y tipo de cuadro de entrada. Elija entre: - Cuadro de texto (una línea) - Cuadro de texto (varias líneas) - Menú desplegable: introduzca las opciones del menú en el campo «Seleccionar opciones de menú» que aparecerá, con una opción por línea.
 - Marque la casilla «¿Obligatorio?» si la solicitud es obligatoria. **HTML**: inserte un bloque de texto HTML en el formulario para obtener orientación adicional, información, etc. El campo «Texto de la solicitud» para esta solicitud tiene opciones de formato WYSIWG. ## Administrar formularios Una vez que tenga al menos un formulario de recopilación, aparecerá en la página Formularios de recopilación. Haga clic en el botón de edición (lápiz) para editar el formulario. Haga clic en la etiqueta del formulario para ver más información sobre el mismo y ver los elementos recopilados. La página del formulario tiene dos pestañas: Información del formulario y Elementos recopilados. La pestaña de información del formulario muestra los datos existentes para la etiqueta, el tipo de anonimato y el conjunto de elementos, junto con una tabla de todas las indicaciones, en orden, con su tipo, texto y si la indicación es obligatoria.

![Página de información del formulario «Compartir una cita»](modulesfiles/collecting_forminfo.png) Para editar el formulario, haga clic en el botón «Editar formulario» situado en la esquina superior derecha. Las opciones de la página de edición del formulario son las mismas que las de añadir un formulario. Para editar una pregunta, haga clic en el botón de edición (lápiz) de la pregunta. Se abrirá el panel lateral de esa pregunta.


![Campos con una flecha roja que apunta a la columna de botones de edición](modulesfiles/collecting_edit2.png) Puede reorganizar el orden de los campos arrastrándolos y soltándolos con el icono de tres líneas situado en el extremo izquierdo de la etiqueta Tipo de campo. ![Campos con una flecha roja que apunta al icono para arrastrar y soltar](modulesfiles/collecting_dragthis.png)

## Configuración del sitio Collecting añade una sección a la [configuración del sitio](../sites/site_settings.md) donde puede gestionar los términos de servicio y los correos electrónicos de los formularios de Collecting para este sitio. ![La sección Collecting en la configuración del sitio con dos campos, como se describe a continuación.](modulesfiles/collecting_settingsSite.png) En esta sección hay dos campos:

**Términos del servicio** es un campo de varias líneas en el que puede introducir los términos del servicio para el material recopilado a través de este sitio. Este texto está vinculado desde el formulario justo encima del botón de envío: ![desde el formulario de recopilación, las palabras «Acepto los términos del servicio» sobre un botón que dice enviar. La frase Términos del servicio es un enlace.](modulesfiles/collecting-ToSlink.png)

Al hacer clic en la frase «Términos del servicio», se abrirá una nueva ventana para que las personas que rellenan el formulario no pierdan la información que han introducido. **URL de los términos del servicio** es un campo de entrada para un enlace a una página externa existente con los términos del servicio. **Dirección de correo electrónico de envío** le permite establecer una dirección personalizada desde la que se enviarán los correos electrónicos de envío. Si se deja en blanco, estos correos electrónicos se enviarán desde la dirección de correo electrónico del administrador en la [Configuración global](../admin/settings.md) de la instalación de Omeka S. **Dirección de correo electrónico de notificación** le permite establecer una dirección de correo electrónico de un miembro del personal al que se enviarán las notificaciones de nuevos envíos. Si se deja en blanco, no se enviará ningún correo electrónico de notificación.

!!! Nota: Si tiene problemas para enviar correos electrónicos desde su instalación de Omeka S, consulte con su proveedor de alojamiento. Algunas configuraciones de alojamiento pueden requerir que el nombre de dominio del correo electrónico del administrador coincida con el nombre de dominio de la instalación (si su dominio es `yourinstall.org`, el correo electrónico del administrador debe ser `user@yourinstall.org`). Omeka S utiliza la utilidad `sendmail` del servidor para enviar correos electrónicos.

## Configuración global La recopilación requerirá que los usuarios completen un formulario reCaptcha para poder enviarlo, si ha añadido una clave reCaptcha en la [Configuración global](../admin/settings.md). Esto puede ser una forma útil de evitar el spam. ## Añadir a las páginas del sitio Para añadir un formulario de recopilación a una página: 1. Vaya a la página en la que desea que aparezca el formulario (o añada una nueva página para el formulario). 1. En la barra lateral **Añadir nuevo bloque**, seleccione el bloque **Recopilación**. 1. En el bloque Recopilación, haga clic en la casilla del formulario que desea incluir. Puede añadir más de un formulario a la página marcando más de una casilla. O bien, puede separar los formularios añadiendo bloques de página independientes, un formulario por bloque.

![Bloque Recopilación con un formulario, su casilla marcada](modulesfiles/collecting_pageblock.png) En la página pública, tu bloque de formulario aparecerá como un elemento `<form>` con un ID de `collecting_form_X`, donde X es el ID del formulario. Las preguntas aparecen en elementos `<div class="field">`; las preguntas obligatorias también tendrán la clase «required». Dentro de cada pregunta hay un `<div class="field-meta">` para el texto de la pregunta y un `<div class="inputs">` para el campo de respuesta. Puede utilizar el [módulo Editor CSS](../modules/csseditor.md) para controlar cómo se muestran estos elementos.

La siguiente es una captura de pantalla del [formulario de recopilación de covid19-archive.org](https://covid-19archive.org/s/archive/page/Share){target=_blank}: ![Un ejemplo de formulario de recopilación titulado «Comparte tu historia». Enlazan con otro formulario en español y otro para la recopilación de audio o vídeo. Los campos son título (obligatorio), carga de archivos y una entrada de texto que pregunta «¿Qué tipo de objeto es este?» (obligatorio).](modulesfiles/collecting_publicformexample.png) ## Gestión de los elementos recopilados Los elementos añadidos a través de un formulario de recopilación aparecerán en la sección Elementos del panel de administración, pero puede que le resulte más fácil gestionarlos a través de la pestaña Recopilación del sitio en el que se recopilaron.

Para ver los elementos recopilados con un formulario específico, vaya a la pestaña Recopilación en el menú contextual del sitio y haga clic en la etiqueta del formulario. A continuación, haga clic en la pestaña **Elementos recopilados**. ![Pestaña Elementos recopilados con varios elementos](modulesfiles/collecting_items.png)

Esta pestaña contiene una tabla con los elementos recopilados ordenados por título, fecha de envío, revisado por, estado y tres puntos suspensivos. Para ver la información recopilada, incluido el nombre de usuario, el correo electrónico, etc., de cualquier elemento, haga clic en los tres puntos suspensivos de «Más información». Al hacer clic en el título de un elemento, se le redirigirá a la página de edición del elemento (en «Elementos», no en «Recopilación»).

Un elemento recopilado puede tener uno de estos tres mensajes de estado: «Necesita revisión», «Público» y «Privado». Para cambiar el estado de un elemento, seleccione el estado deseado en el menú desplegable y, a continuación, haga clic en el botón «Actualizar estados» situado en la esquina superior derecha.

Cuando actualice el estado de un elemento de «Necesita revisión» a «Público» o «Privado», su nombre aparecerá en la fila de ese elemento como el usuario que lo ha revisado. Si hay varias personas trabajando en un sitio, esto puede ayudarle a llevar un registro de quién ha aprobado los elementos recopilados. 